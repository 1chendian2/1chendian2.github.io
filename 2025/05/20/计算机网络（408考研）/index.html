<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算机网络（408考研） | 陈同学的桃花源</title><meta name="author" content="陈淀"><meta name="copyright" content="陈淀"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据链路层数据链路层的流量控制与可靠传输机制GNB场景2：WT&#x3D;7（正确情况）发送方发送 7 个帧：  发送序号 0, 1, 2, 3, 4, 5, 6（预留序号 7）。接收方返回 ACK 0～ACK 6：假设所有 ACK 到达，发送方滑动窗口，发送 新帧 7, 0, 1, 2, 3, 4, 5。即使 ACK 全部丢失：发送方重传的是 旧的 0～6，而接收方此时期待的是 7 或 0～5。">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络（408考研）">
<meta property="og:url" content="https://chenhongyang86.fun/2025/05/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%88408%E8%80%83%E7%A0%94%EF%BC%89/index.html">
<meta property="og:site_name" content="陈同学的桃花源">
<meta property="og:description" content="数据链路层数据链路层的流量控制与可靠传输机制GNB场景2：WT&#x3D;7（正确情况）发送方发送 7 个帧：  发送序号 0, 1, 2, 3, 4, 5, 6（预留序号 7）。接收方返回 ACK 0～ACK 6：假设所有 ACK 到达，发送方滑动窗口，发送 新帧 7, 0, 1, 2, 3, 4, 5。即使 ACK 全部丢失：发送方重传的是 旧的 0～6，而接收方此时期待的是 7 或 0～5。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://chenhongyang86.fun/img/%E6%A3%AE%E6%9E%97-%E8%BD%A6%E7%AB%99.png">
<meta property="article:published_time" content="2025-05-20T10:49:33.000Z">
<meta property="article:modified_time" content="2025-05-30T00:57:16.145Z">
<meta property="article:author" content="陈淀">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chenhongyang86.fun/img/%E6%A3%AE%E6%9E%97-%E8%BD%A6%E7%AB%99.png"><link rel="shortcut icon" href="/img/bitbug_favicon.ico"><link rel="canonical" href="https://chenhongyang86.fun/2025/05/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%88408%E8%80%83%E7%A0%94%EF%BC%89/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 7 || hour >= 22
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":3,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":3,"languages":{"author":"作者: 陈淀","link":"链接: ","source":"来源: 陈同学的桃花源","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#723FE8","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络（408考研）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/树林-车站.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/My.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">72</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa-solid fa-eye"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/2025/01/10/%E7%AE%80%E5%8E%86/"><i class="fa-fw fa-solid fa-user"></i><span> 个人简历</span></a></div><div class="menus_item"><a class="site-page" href="/weather"><i class="fa-fw fa-solid fa-cloud-showers-water"></i><span> 家的天气</span></a></div><div class="menus_item"><a class="site-page" href="/search"><i class="fa-fw fa-solid fa-binoculars"></i><span> 联网搜索</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/movies"><i class="fa-fw fas fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books"><i class="fa-fw fas fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/link"><i class="fa-fw fa-solid fa-link"></i><span> 链接</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/森林-车站.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/%E6%9C%88%E4%BA%AE.png" alt="Logo"></a><a class="nav-page-title" href="/"><span class="site-name">计算机网络（408考研）</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa-solid fa-eye"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/2025/01/10/%E7%AE%80%E5%8E%86/"><i class="fa-fw fa-solid fa-user"></i><span> 个人简历</span></a></div><div class="menus_item"><a class="site-page" href="/weather"><i class="fa-fw fa-solid fa-cloud-showers-water"></i><span> 家的天气</span></a></div><div class="menus_item"><a class="site-page" href="/search"><i class="fa-fw fa-solid fa-binoculars"></i><span> 联网搜索</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/movies"><i class="fa-fw fas fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books"><i class="fa-fw fas fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/link"><i class="fa-fw fa-solid fa-link"></i><span> 链接</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络（408考研）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2025-05-20T10:49:33.000Z" title="发表于 2025-05-20 18:49:33">2025-05-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">9.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>31分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h3 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h3><h4 id="数据链路层的流量控制与可靠传输机制"><a href="#数据链路层的流量控制与可靠传输机制" class="headerlink" title="数据链路层的流量控制与可靠传输机制"></a>数据链路层的流量控制与可靠传输机制</h4><h5 id="GNB"><a href="#GNB" class="headerlink" title="GNB"></a>GNB</h5><p>场景2：<br>WT&#x3D;7（正确情况）<br>发送方发送 7 个帧：</p>
<ol>
<li>发送序号 0, 1, 2, 3, 4, 5, 6（预留序号 7）。<br>接收方返回 ACK 0～ACK 6：<br>假设所有 ACK 到达，发送方滑动窗口，发送 新帧 7, 0, 1, 2, 3, 4, 5。<br>即使 ACK 全部丢失：<br>发送方重传的是 旧的 0～6，而接收方此时期待的是 7 或 0～5。<br>接收方发现 重复的 0～6 会丢弃，避免歧义。</li>
</ol>
<h5 id="SR"><a href="#SR" class="headerlink" title="SR"></a>SR</h5><p><img src="/img/2025_5_20/005.png" alt="404"><br><img src="/img/2025_5_20/006.png" alt="404"></p>
<h4 id="为什么TDM（时分复用）对带宽有要求"><a href="#为什么TDM（时分复用）对带宽有要求" class="headerlink" title="为什么TDM（时分复用）对带宽有要求"></a>为什么TDM（时分复用）对带宽有要求</h4><ul>
<li>TDM的基本原理</li>
</ul>
<p>TDM（时分复用）通过 将时间划分为固定长度的时隙，让多个信号轮流占用信道：</p>
<ol>
<li>发送端：不同用户的信号被分配到不同的时间片（如用户1用第1个时隙，用户2用第2个时隙……）。</li>
<li>接收端：根据时间片提取对应信号，完成多路信号的分离。</li>
</ol>
<ul>
<li>带宽要求的核心原因</li>
</ul>
<p>TDM对带宽的要求源于信号调制后的复合信号特性：复合信号的带宽：将多个信号按时间片交织后，复合信号的频谱会扩展，其带宽可能远大于单个信号带宽。<br>原因：时域上的快速切换（时隙轮换）会导致频域的高频成分增加（傅里叶变换性质）。</p>
<ul>
<li>举例：</li>
</ul>
<p>若将 4 路 4 kHz 的语音信号通过 TDM 合并：时隙切换速度需足够快（如每秒 8000 次，每时隙 125 μs），复合信号的带宽可能扩展到 数十kHz。若信道带宽不足，高频成分会被滤除，导致信号失真。</p>
<h4 id="令牌环网络的工作流程"><a href="#令牌环网络的工作流程" class="headerlink" title="令牌环网络的工作流程"></a>令牌环网络的工作流程</h4><p>A → B → C → D →（令牌循环）<br>站点要发送数据时</p>
<ul>
<li>举例：站点B有数据要发给站点D。</li>
</ul>
<ol>
<li>等待令牌：B必须等到令牌传到自己手里（比如当前令牌在A→B的路径上）。</li>
<li>拿到令牌后：<br>B把令牌改成数据帧（贴上数据，写上目的地址D）。<br>发送数据帧到环上（B→C→D→A→B）。</li>
<li>数据帧的旅程<br>途经C：C检查数据帧，发现不是发给自己的，直接转发给D。<br>到达D：D发现是发给自己的，复制数据，但继续转发帧（因为帧要回到发送者B）。<br>回到B：B收到自己发的数据帧后，不再转发，而是：<br>检查数据是否成功传输（通过帧状态位）。<br>回收数据帧，重新生成一个干净的令牌。<br>把新令牌传给下一个站点（B→C）。</li>
</ol>
<h4 id="为什么全双工模式下不需要碰撞检测？"><a href="#为什么全双工模式下不需要碰撞检测？" class="headerlink" title="为什么全双工模式下不需要碰撞检测？"></a>为什么全双工模式下不需要碰撞检测？</h4><ul>
<li>半双工（Half-Duplex）：</li>
</ul>
<ol>
<li>同一时间只能单向通信（如对讲机）。</li>
<li>发送和接收共享同一信道，因此可能发生冲突（两个设备同时发数据）。</li>
<li>需要碰撞检测（如CSMA&#x2F;CD）：设备边发边听，发现冲突后重传。</li>
</ol>
<ul>
<li>全双工（Full-Duplex）：</li>
</ul>
<ol>
<li>双向同时通信（如电话）。</li>
<li>发送和接收使用独立的物理通道（如双绞线的两对线），互不干扰。</li>
<li>无需碰撞检测：因为发送和接收完全隔离，不可能冲突。</li>
</ol>
<h4 id="为什么网卡同时涉及数据链路层和物理层？"><a href="#为什么网卡同时涉及数据链路层和物理层？" class="headerlink" title="为什么网卡同时涉及数据链路层和物理层？"></a>为什么网卡同时涉及数据链路层和物理层？</h4><ol>
<li>物理层（Layer 1）的职责</li>
</ol>
<p>信号转换：<br>将计算机内部的数字信号（0&#x2F;1）转换为适合传输的 电信号（以太网）、光信号（光纤） 或 电磁波（Wi-Fi）。</p>
<ol start="2">
<li>数据链路层（Layer 2）的职责</li>
</ol>
<p>帧的封装与解封装：<br>将网络层（如IP数据包）加上 帧头（源&#x2F;目的MAC地址）和 帧尾（FCS校验）。</p>
<h4 id="CSMA-CD协议中最短帧长的界定"><a href="#CSMA-CD协议中最短帧长的界定" class="headerlink" title="CSMA&#x2F;CD协议中最短帧长的界定"></a>CSMA&#x2F;CD协议中最短帧长的界定</h4><p>在以太网（CSMA&#x2F;CD）中：</p>
<ol>
<li>发送数据时，设备会持续监听信道（边发边听）。</li>
<li>如果发送的数据和监听到的信号不一致，说明发生了冲突。</li>
<li>一旦检测到冲突发送方会立即停止发送，并执行退避算法等待重传。</li>
</ol>
<p>如果帧太短的话：</p>
<ol>
<li>在冲突信号返回 A 之前，A 已经发完了整个帧。</li>
<li>A 停止监听信道（因为帧已经发完），无法检测到冲突。</li>
<li>结果：A 以为发送成功，但实际上数据已经因冲突被破坏。</li>
</ol>
<p>需要界定最短帧长，那么临界点就是传数据的时间占用整个争用期（2τ）</p>
<p>为什么“2τ × 速率”是最短帧长？</p>
<ol>
<li>2τ 是冲突信号返回的最长时间。</li>
<li>速率 决定单位时间能发送多少比特。</li>
<li>乘积 就是“在冲突信号返回前，最少要发送多少比特”。</li>
<li>这里的（τ）为总线传播时延，就是在链路上传输消耗的时间。</li>
<li>总而言之：</li>
</ol>
<h4 id="以太网：物理上星型结构、逻辑上是总线型结构"><a href="#以太网：物理上星型结构、逻辑上是总线型结构" class="headerlink" title="以太网：物理上星型结构、逻辑上是总线型结构"></a>以太网：物理上星型结构、逻辑上是总线型结构</h4><p><img src="/img/2025_5_20/001.png" alt="404"></p>
<p>由于电信号在网线中传输时会衰减，集线器的作用是 接收信号并重新放大，再广播给所有端口。</p>
<h4 id="IEEE-802-11-无线局域网"><a href="#IEEE-802-11-无线局域网" class="headerlink" title="IEEE 802.11 无线局域网"></a>IEEE 802.11 无线局域网</h4><h5 id="有固定设施的"><a href="#有固定设施的" class="headerlink" title="有固定设施的"></a>有固定设施的</h5><p><img src="/img/2025_5_20/002.png" alt="404"></p>
<p>为什么AP会改变？</p>
<ol>
<li>无线信号覆盖限制：单个AP的覆盖范围有限，移动设备（A）远离原AP（AP1）时，信号变弱，需切换到新AP（AP2）。</li>
<li>无缝漫游：在ESS中，所有AP共享同一个网络标识（SSID），设备可自动切换AP，而用户无感知。</li>
<li>AP改变但通信不中断：</li>
<li>高层协议（如TCP&#x2F;IP）不受影响，因为分配系统（DS）确保了数据转发。</li>
<li>只有物理层和链路层的连接点（AP）发生变化。</li>
</ol>
<h5 id="无固定设施的自组织网络"><a href="#无固定设施的自组织网络" class="headerlink" title="无固定设施的自组织网络"></a>无固定设施的自组织网络</h5><p>军事战场通信</p>
<ul>
<li><p>场景：<br>士兵携带的无线设备（如战术电台、无人机）在野外快速部署，没有固定基站。</p>
</li>
<li><p>自组网如何工作：</p>
</li>
</ul>
<p>设备自动发现附近的战友设备，形成临时网络。</p>
<p>每台设备既是通信终端，也是路由器，负责转发其他设备的数据。</p>
<p>如果某个士兵移动（如前进或撤退），网络拓扑动态调整，自动选择新路径。</p>
<ul>
<li>与移动IP的区别：</li>
</ul>
<p>移动IP需要依赖固定基站和互联网基础设施，而自组网完全独立运行。</p>
<ul>
<li><p>注意区分与移动IP的区别<br><img src="/img/2025_5_20/003.png" alt="404"></p>
</li>
<li><p>手机热点是自组织网络吗？<br><img src="/img/2025_5_20/004.png" alt="404"></p>
</li>
</ul>
<h4 id="PPP-P"><a href="#PPP-P" class="headerlink" title="PPP-P"></a>PPP-P</h4><ol>
<li>LCP 负责建立、维护和终止物理连接，并协商链路层参数。</li>
</ol>
<p>调制解调器拨号后，LCP先和ISP的服务器“握手”。<br>双方协商：“我们用CHAP认证，不压缩数据，链路超时时间设为30秒”。<br>若协商成功，链路建立；若失败（如密码错误），断开连接。</p>
<ol start="2">
<li>NCP 在LCP建立链路后，配置网络层参数（如IP地址）。</li>
</ol>
<p>LCP完成链路建立后：<br>NCP（具体为IPCP）向ISP请求：“请给我一个IP地址”。<br>ISP回复：“你的IP是192.168.1.100，DNS是8.8.8.8”。<br>你的电脑获得IP，开始上网。</p>
<ol start="3">
<li>组帧的方法</li>
</ol>
<h4 id="不同链路层协议的转发机制的差异"><a href="#不同链路层协议的转发机制的差异" class="headerlink" title="不同链路层协议的转发机制的差异"></a>不同链路层协议的转发机制的差异</h4><ul>
<li>以太网（IEEE 802.3）</li>
</ul>
<p>使用CSMA&#x2F;CD（半双工）或全双工模式，依赖交换机转发。</p>
<ul>
<li>PPP协议（点对点链路）</li>
</ul>
<p>简化帧格式（无MAC地址），直接转发到唯一对端。</p>
<ul>
<li>无线网络（IEEE 802.11）</li>
</ul>
<p>通过AP（接入点）转发，MAC地址包含发送端、接收端和BSSID。</p>
<h4 id="广播域（Broadcast-Domain）与冲突域（Collision-Domain）"><a href="#广播域（Broadcast-Domain）与冲突域（Collision-Domain）" class="headerlink" title="广播域（Broadcast Domain）与冲突域（Collision Domain）"></a>广播域（Broadcast Domain）与冲突域（Collision Domain）</h4><ol>
<li>广播域（Broadcast Domain）</li>
</ol>
<p>定义：<br>广播域是指网络中能接收到同一广播消息的所有设备的集合。当一台设备发送广播包（如目的IP为255.255.255.255或MAC为FF:FF:FF:FF:FF:FF）时，该包会被广播域内的所有设备接收和处理。</p>
<p>关键设备的影响：</p>
<p>路由器：分隔广播域（默认不转发广播包），每个路由器接口属于不同的广播域。</p>
<p>交换机：不能分隔广播域（会泛洪广播包），所有连接的设备属于同一广播域。</p>
<p>集线器&#x2F;中继器：不能分隔广播域（物理层设备，直接转发所有信号）。</p>
<p>示例：<br>若两个局域网通过路由器连接，则它们是两个独立的广播域；若仅通过交换机连接，则属于同一个广播域。</p>
<ol start="2">
<li>冲突域（Collision Domain）</li>
</ol>
<p>定义：<br>冲突域是指网络中共享同一信道、可能发生数据冲突（Collision）的设备范围。当多台设备同时发送数据时，冲突域内的设备需要竞争信道（如CSMA&#x2F;CD机制）。</p>
<p>关键设备的影响：</p>
<p>交换机：分隔冲突域（每个交换机端口是一个独立的冲突域），因为交换机支持全双工通信。</p>
<p>路由器：分隔冲突域（每个接口独立）。</p>
<p>集线器&#x2F;中继器：不能分隔冲突域（所有连接的设备共享同一信道）。</p>
<p>示例：<br>若10台设备连接到一个集线器，它们属于同一个冲突域；若连接到一个交换机，则每台设备独占一个冲突域。</p>
<h4 id="如何理解“数据链路层中，流量控制与可靠传输机制是交织在一起的”？"><a href="#如何理解“数据链路层中，流量控制与可靠传输机制是交织在一起的”？" class="headerlink" title="如何理解“数据链路层中，流量控制与可靠传输机制是交织在一起的”？"></a>如何理解“数据链路层中，流量控制与可靠传输机制是交织在一起的”？</h4><p>在计算机网络的数据链路层（Data Link Layer），<strong>流量控制（Flow Control）</strong> 和 <strong>可靠传输（Reliable Delivery）</strong> 是两个核心功能，它们通常紧密结合，共同确保数据高效、无差错地传输。以下是具体解释：</p>
<hr>
<p> <strong>1. 流量控制（Flow Control）</strong><br><strong>目的</strong>：防止发送方发送数据过快，导致接收方来不及处理而丢包。<br><strong>实现方式</strong>：  </p>
<ul>
<li><strong>滑动窗口协议（Sliding Window）</strong>：动态调整发送窗口大小，限制未确认的数据帧数量。  </li>
<li><strong>停等协议（Stop-and-Wait）</strong>：每发一帧，必须等确认（ACK）后再发下一帧（效率低，但简单）。</li>
</ul>
<p><strong>关键点</strong>：流量控制主要解决 <strong>“接收方处理能力”</strong> 问题，避免缓冲区溢出。</p>
<hr>
<p> <strong>2. 可靠传输（Reliable Delivery）</strong><br><strong>目的</strong>：确保数据帧正确、按序到达接收方，避免丢失或错误。<br><strong>实现方式</strong>：  </p>
<ul>
<li><strong>确认应答（ACK）</strong>：接收方收到数据后返回确认信号。  </li>
<li><strong>超时重传（Retransmission）</strong>：如果发送方未收到 ACK，会重发数据帧。  </li>
<li><strong>序号机制（Sequence Numbers）</strong>：确保数据按顺序接收，避免重复或乱序。</li>
</ul>
<p><strong>关键点</strong>：可靠传输主要解决 <strong>“数据丢失或错误”</strong> 问题。</p>
<hr>
<p> <strong>3. 为什么说它们“交织在一起”？</strong><br>在数据链路层，<strong>流量控制和可靠传输通常由同一机制（如滑动窗口协议）同时实现</strong>，原因如下：  </p>
<p> <strong>（1）滑动窗口协议同时实现两种功能</strong></p>
<ul>
<li><strong>流量控制</strong>：通过调整窗口大小限制发送速率。  </li>
<li><strong>可靠传输</strong>：通过 ACK 和重传确保数据正确到达。</li>
</ul>
<p><strong>例子</strong>（TCP 的类似机制）：  </p>
<ul>
<li>发送方窗口大小 &#x3D; 接收方剩余缓冲区大小（流量控制）。  </li>
<li>如果某个帧丢失，接收方会要求重传（可靠传输）。</li>
</ul>
<p> <strong>（2）停等协议（简单但低效）</strong></p>
<ul>
<li>每发一帧必须等 ACK（可靠传输）。  </li>
<li>由于每次只能发一帧，天然限制了发送速率（流量控制）。</li>
</ul>
<p> <strong>（3）ARQ（自动重传请求）机制</strong></p>
<ul>
<li><strong>回退 N 帧（Go-Back-N, GBN）</strong> 和 <strong>选择重传（Selective Repeat, SR）</strong> 协议同时涉及：  <ul>
<li><strong>流量控制</strong>：限制未确认帧的数量（窗口大小）。  </li>
<li><strong>可靠传输</strong>：通过 ACK&#x2F;NAK 和重传保证数据正确性。</li>
</ul>
</li>
</ul>
<hr>
<p> <strong>4. 总结</strong></p>
<table>
<thead>
<tr>
<th><strong>功能</strong></th>
<th><strong>流量控制（Flow Control）</strong></th>
<th><strong>可靠传输（Reliable Delivery）</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>核心目标</strong></td>
<td>防止接收方过载</td>
<td>防止数据丢失或错误</td>
</tr>
<tr>
<td><strong>实现方式</strong></td>
<td>滑动窗口、停等协议</td>
<td>ACK、超时重传、序号机制</td>
</tr>
<tr>
<td><strong>交织点</strong></td>
<td>滑动窗口同时控制速率和可靠性</td>
<td>ARQ 机制（如 GBN、SR）</td>
</tr>
</tbody></table>
<p><strong>结论</strong>：<br>在数据链路层，<strong>流量控制和可靠传输通常由同一套协议（如滑动窗口、ARQ）实现</strong>，因此它们是紧密交织的。这种设计既保证了数据传输的可靠性，又避免了接收方被淹没，提高了整体效率。</p>
<h3 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h3><h4 id="网络地址转换（NAT）"><a href="#网络地址转换（NAT）" class="headerlink" title="网络地址转换（NAT）"></a>网络地址转换（NAT）</h4><ul>
<li>它把内部网络（例如家或公司的局域网）的私有IP地址，转换成对外的公共IP地址，让内部设备能访问互联网。</li>
<li>例如：</li>
</ul>
<ol>
<li>有3台设备（手机、电脑、平板），都通过路由器连接互联网。</li>
<li>内部IP（路由器分配的私有地址）：<br>手机：192.168.1.2<br>电脑：192.168.1.3<br>平板：192.168.1.4</li>
<li>外部IP（运营商提供的公共地址）：123.45.67.89</li>
<li>当你的手机访问某个网站（例如陈同学的桃花源）时，数据包先发给路由器，路由器会把手机的私有IP（192.168.1.2）替换成公共IP（123.45.67.89），并记录这个连接。网站收到请求后，只会看到公共IP（123.45.67.89），不知道内部具体是哪台设备发的请求。网站返回数据时，路由器根据之前的记录，再把数据转发给手机。</li>
</ol>
<h4 id="私有IP地址"><a href="#私有IP地址" class="headerlink" title="私有IP地址"></a>私有IP地址</h4><p>A_HOME和B_HOME的路由器都用同样的私有IP段（比如192.168.1.1）。</p>
<p>A的电脑IP是192.168.1.2，B的电视也是192.168.1.2。</p>
<p>私有IP只在本地有效：</p>
<p>A的192.168.1.2只在A的局域网内有效，B的192.168.1.2也只在B有效。</p>
<p>当A电脑访问陈同学的网站时，路由器会把私有IP（192.168.1.2）转换成公共IP（比如123.45.67.89）。</p>
<h4 id="通过路由器连接IPv4和IPv6网络"><a href="#通过路由器连接IPv4和IPv6网络" class="headerlink" title="通过路由器连接IPv4和IPv6网络"></a>通过路由器连接IPv4和IPv6网络</h4><ul>
<li>隧道技术（Tunneling）</li>
</ul>
<p>两个IPv6网络通过IPv4互联网连接：</p>
<ol>
<li><p>由器A将IPv6数据包封装为IPv4数据包，目标为路由器B的IPv4地址。</p>
</li>
<li><p>路由器B解封装后，将原始IPv6数据包转发到本地IPv6网络。</p>
</li>
</ol>
<h4 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h4><p>DHCP的工作流程（4个步骤）</p>
<p>假设一台新电脑（DHCP客户端）连接到公司网络，需要获取IP地址：</p>
<p>（1）DHCP发现（DHCP Discover）电脑（刚开机，IP&#x3D;0.0.0.0）广播一条消息：“谁是DHCP服务器？我需要一个IP地址！”源IP:0.0.0.0（因为还没有IP）目标IP:255.255.255.255（全网广播）目标MAC:FF:FF:FF:FF:FF:FF（局域网广播）<br>为什么用广播？→电脑不知道DHCP服务器在哪，只能大喊一声问所有人。</p>
<p>（2）DHCP提供（DHCP Offer）DHCP服务器（比如公司内网的服务器）听到广播后回应：“我这有一个IP：192.168.1.100，你要吗？”源IP:DHCP服务器的IP（如192.168.1.1）目标IP:255.255.255.255（仍然广播，因为电脑还没IP）提供的配置:IP地址、子网掩码、网关、DNS、租期（如24小时）<br>注意：如果网络中有多个DHCP服务器，电脑会收到多个Offer，通常选择第一个。</p>
<p>（3）DHCP请求（DHCP Request）电脑选择其中一个Offer（比如192.168.1.100），并广播确认：“我要用192.168.1.100，请确认！”源IP:0.0.0.0（仍未正式分配）目标IP:255.255.255.255（继续广播）<br>为什么还要广播？→告诉其他DHCP服务器“我已选好，你们不用再给我IP了”。</p>
<p>（4）DHCP确认（DHCP Ack）DHCP服务器最终确认分配：“OK，192.168.1.100归你了，租期24小时！”源IP:DHCP服务器IP目标IP:255.255.255.255正式分配：IP、子网掩码、网关、DNS等信息。<br>此时，电脑正式获得IP，可以上网了！</p>
<h4 id="IPv6的QoS"><a href="#IPv6的QoS" class="headerlink" title="IPv6的QoS"></a>IPv6的QoS</h4><ul>
<li>是什么：</li>
</ul>
<p>在有限的带宽下，提供端到端的可靠保证</p>
<ul>
<li>IPv6 通过以下方式原生支持 QoS：</li>
</ul>
<ol>
<li><p>流量类别（Traffic Class, 8位）<br>标记数据包的优先级（如视频通话 &gt; 网页浏览）。</p>
</li>
<li><p>流标签（Flow Label, 20位）<br>标识同一数据流（如一场视频会议的所有包），确保路由器统一处理。</p>
</li>
</ol>
<ul>
<li>某公司使用 IPv6 网络进行跨国视频会议，需保证低延迟、不卡顿。</li>
</ul>
<p>步骤：</p>
<ol>
<li>标记优先级</li>
</ol>
<p>视频会议终端将数据包的 Traffic Class 设为 0xB8（对应实时交互类流量）。<br>Flow Label 设为唯一值（如 0xABC12），标识此会议流。</p>
<ol start="2">
<li>路由器处理</li>
</ol>
<p>路由器检测到 Traffic Class &#x3D; 0xB8，优先转发该数据包。<br>相同 Flow Label 的包走同一路径，避免乱序。</p>
<ol start="3">
<li>带宽保障</li>
</ol>
<p>若网络拥塞，普通下载流量（Traffic Class &#x3D; 0x00）会被延迟，视频会议包仍优先传输。</p>
<ol start="4">
<li>效果：</li>
</ol>
<p>即使网络带宽紧张，视频会议仍保持流畅，而文件下载速度暂时下降。</p>
<h4 id="RIP-中的水平分割与毒性逆转"><a href="#RIP-中的水平分割与毒性逆转" class="headerlink" title="RIP 中的水平分割与毒性逆转"></a>RIP 中的水平分割与毒性逆转</h4><p><img src="/img/2025_5_25/002.png" alt="404"></p>
<ul>
<li>水平分割的作用</li>
</ul>
<ol>
<li><p>规则：如果路由器从某个接口学到一条路由，则不会通过同一接口再通告该路由。</p>
</li>
<li><p>本例：</p>
</li>
</ol>
<p>RouterB 从 RouterA 的接口学到 10.0.0.0&#x2F;8，因此不会通过同一接口将这条路由发回给 RouterA。</p>
<p>即使 RouterA 的直连路由失效，RouterB 也不会向 RouterA 发送错误信息，从而避免环路。</p>
<ul>
<li>使用毒性逆转（Poison Reverse）的效果</li>
</ul>
<p>毒性逆转是水平分割的增强版，其核心思想是：<br>“如果路由器从某个接口学到一条路由，它仍然会通过同一接口通告该路由，但会将其标记为不可达（跳数&#x3D;∞）。”</p>
<p><img src="/img/2025_5_25/003.png" alt="404"></p>
<p>注意：</p>
<ol>
<li>当 RouterA 的直连路由 10.0.0.0&#x2F;8 失效时：RouterA 会立即删除直连路由。</li>
<li>水平逆转超时速度慢：RouterB 会继续保留“10.0.0.0&#x2F;8 可通过 RouterA 到达（跳数&#x3D;1）”的路由，直到路由超时计时器（Route Age Timer）到期（如RIP默认是180秒）。</li>
</ol>
<h4 id="移动-IP-通信过程示例"><a href="#移动-IP-通信过程示例" class="headerlink" title="移动 IP 通信过程示例"></a>移动 IP 通信过程示例</h4><ul>
<li>场景描述</li>
</ul>
<p>假设你是一台笔记本电脑（移动节点），IP 地址是 192.168.1.100（归属地址），原始网络是“家庭 Wi-Fi”（归属网络）。<br>当你带着笔记本从家移动到公司时，公司网络是被访网络，你需要保持 192.168.1.100 不变以维持正在进行的视频会议。</p>
<ul>
<li>步骤详解</li>
</ul>
<ol>
<li>在家（归属网络）</li>
</ol>
<p>你的笔记本通过家庭 Wi-Fi（192.168.1.0&#x2F;24）联网，本地代理（家庭路由器）记录你的归属地址 192.168.1.100。</p>
<ol start="2">
<li>移动到公司（被访网络）</li>
</ol>
<p>公司网络是 10.0.0.0&#x2F;8，笔记本连接到公司 Wi-Fi。</p>
<p>外地代理（公司路由器）为你分配一个转交地址（如 10.0.0.5），并通知你的本地代理：“192.168.1.100 现在在 10.0.0.5”。</p>
<ol start="3">
<li>数据转发流程</li>
</ol>
<p>同事（IP 192.168.1.200）给你发送数据包，目标地址是你的归属地址 192.168.1.100。</p>
<p>本地代理（家庭路由器）拦截该数据包，通过隧道封装（如 IP-in-IP）发送到转交地址 10.0.0.5。</p>
<p>外地代理（公司路由器）解封装数据包，最终递交给你的笔记本。</p>
<ol start="4">
<li>你的回复</li>
</ol>
<p>笔记本直接通过公司网络（10.0.0.0&#x2F;8）发送回复，无需经过本地代理（优化路径）。</p>
<h4 id="路由器的交付"><a href="#路由器的交付" class="headerlink" title="路由器的交付"></a>路由器的交付</h4><h4 id="直接交付-全程不经过路由器"><a href="#直接交付-全程不经过路由器" class="headerlink" title="直接交付-全程不经过路由器"></a>直接交付-全程不经过路由器</h4><p>即若同属一个子网的A与B通信：主机 A（192.168.1.2）和主机 B（192.168.1.3）连接在同一交换机的局域网中（子网 192.168.1.0&#x2F;24）。</p>
<ol>
<li><p>主机 A 判断 192.168.1.3 属于同一子网。</p>
</li>
<li><p>主机 A 发送 ARP 请求：“谁是 192.168.1.3？请告诉你的 MAC 地址”。</p>
</li>
<li><p>主机 B 回复 ARP 响应，提供自己的 MAC 地址。</p>
</li>
<li><p>主机 A 将 ICMP 请求包（ping）封装目标 MAC 地址，通过交换机直接交付给主机 B。</p>
</li>
</ol>
<h4 id="间接交付-多次直接交付"><a href="#间接交付-多次直接交付" class="headerlink" title="间接交付-多次直接交付"></a>间接交付-多次直接交付</h4><h3 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h3><h4 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h4><p>实际通信流程示例</p>
<ul>
<li>场景：用FTP客户端（端口21）上传文件到服务器。</li>
</ul>
<ol>
<li>客户端：</li>
</ol>
<p>随机选择源端口（如50001），目标端口&#x3D;21。<br>发送数据包：源Socket&#x3D;192.168.1.100:50001，目的Socket&#x3D;203.0.113.5:21。</p>
<ol start="2">
<li>服务器：</li>
</ol>
<p>通过端口21识别FTP服务进程，处理请求。<br>返回数据时，源Socket&#x3D;203.0.113.5:21，目的Socket&#x3D;192.168.1.100:50001。</p>
<ol start="3">
<li>多任务支持：</li>
</ol>
<p>同一台服务器可同时处理多个FTP连接，因为每个客户端的源Socket不同（如192.168.1.100:50001 vs 192.168.1.101:60000）</p>
<h4 id="Q：UDP完全不靠谱吗？"><a href="#Q：UDP完全不靠谱吗？" class="headerlink" title="Q：UDP完全不靠谱吗？"></a>Q：UDP完全不靠谱吗？</h4><p>不是！UDP的不可靠指协议本身不提供重传等机制，但应用层可自行实现可靠性（如QUIC协议）。</p>
<h4 id="Q：TCP一定比UDP慢？"><a href="#Q：TCP一定比UDP慢？" class="headerlink" title="Q：TCP一定比UDP慢？"></a>Q：TCP一定比UDP慢？</h4><p>不一定！在丢包率低的网络中，TCP的流量控制能优化吞吐量；而UDP在高丢包时可能因无重传更快。</p>
<h4 id="TCP-三次握手"><a href="#TCP-三次握手" class="headerlink" title="TCP 三次握手"></a>TCP 三次握手</h4><ul>
<li>为什么要使用三次握手？</li>
</ul>
<ol>
<li>不使用三次握手</li>
</ol>
<p>若客户端发送SYN&#x3D;1, Seq&#x3D;100（第一次握手），但因网络延迟未到达服务器。</p>
<p>客户端超时重传SYN&#x3D;1, Seq&#x3D;200（新请求），成功建立连接并传输数据后关闭。</p>
<p>此时旧SYN（Seq&#x3D;100）突然到达服务器，若仅用两次握手：</p>
<p>服务器误认为新连接，回复SYN-ACK并分配资源。</p>
<p>客户端实际已关闭连接，不会回复ACK，导致服务器一直等待（资源浪费）。</p>
<ol start="2">
<li>三次握手如何解决：</li>
</ol>
<p>客户端对旧SYN-ACK（应答Seq&#x3D;100）会回复RST（重置），因为当前连接已失效。（客户端已经完成了Seq&#x3D;200的连接并关闭了。它现在并没有处于“SYN_SENT”或“ESTABLISHED”状态。当它收到这个SYN-ACK（Seq&#x3D;300，对Seq&#x3D;100的响应）时，发现这不是自己当前期望的报文。于是客户端直接丢弃这个SYN-ACK，并发送RST（Reset）报文给服务器。RST的作用是告诉服务器：“这个连接我已经不认了，请你别等了。”）</p>
<p>关键点：第三次握手（ACK）是客户端对服务器响应的确认，表明连接是“新鲜”的。</p>
<h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><h4 id="域名解析过程示例（以查询-1chendian2-github-io-为例）"><a href="#域名解析过程示例（以查询-1chendian2-github-io-为例）" class="headerlink" title="域名解析过程示例（以查询 1chendian2.github.io 为例）"></a>域名解析过程示例（以查询 1chendian2.github.io 为例）</h4><p>假设你的计算机（客户机）需要访问 <code>1chendian2.github.io</code>，但不知道它的 IP 地址，于是触发 DNS 解析过程。整个过程涉及 <strong>递归查询 + 迭代查询</strong>，并可能发送 <strong>最多 8 个 UDP 报文</strong>（4 次查询 + 4 次响应）。  </p>
<p>步骤详解</p>
<ul>
<li><strong>① 客户机 → 本地域名服务器（递归查询）</strong></li>
</ul>
<ol>
<li><strong>动作</strong>：你的计算机向 <strong>本地 DNS 服务器</strong>（如 ISP 提供的 DNS 服务器）发送一个 <strong>DNS 请求报文</strong>（查询 <code>1chendian2.github.io</code> 的 IP）。  </li>
<li><strong>查询方式</strong>：<strong>递归查询</strong>（即本地 DNS 服务器必须返回最终结果，不能让你自己去问其他服务器）。</li>
</ol>
<blockquote>
<p><strong>报文计数</strong>：  </p>
<ul>
<li>查询报文 1（客户机 → 本地 DNS）  </li>
<li>响应报文 1（本地 DNS → 客户机，但此时可能无缓存，需后续查询）</li>
</ul>
</blockquote>
<hr>
<ul>
<li><strong>② 本地 DNS 服务器查询缓存</strong></li>
</ul>
<ol>
<li>如果本地 DNS 服务器缓存中有 <code>1chendian2.github.io</code> 的记录，直接返回 IP（解析结束）。  </li>
<li><strong>若无缓存</strong>，则本地 DNS 服务器代表客户机，向 <strong>根域名服务器</strong> 发起 <strong>迭代查询</strong>。</li>
</ol>
<hr>
<ul>
<li><strong>③ 本地 DNS → 根域名服务器（迭代查询）</strong></li>
</ul>
<ol>
<li><strong>动作</strong>：本地 DNS 服务器向 <strong>根域名服务器</strong> 查询 <code>1chendian2.github.io</code> 的 IP。<em><strong>（三级域名的网站、四级域名网站见2016计算机408考研）</strong></em></li>
<li><strong>根域名服务器回复</strong>：“我不知道 <code>1chendian2.github.io</code> 的 IP，但 <code>.com</code> 顶级域名服务器（TLD）的地址是 <code>X.X.X.X</code>，你去问它。”</li>
</ol>
<blockquote>
<p><strong>报文计数</strong>：  </p>
<ul>
<li>查询报文 2（本地 DNS → 根服务器）  </li>
<li>响应报文 2（根服务器 → 本地 DNS，返回 <code>.com</code> TLD 地址）</li>
</ul>
</blockquote>
<hr>
<ul>
<li><strong>④ 本地 DNS → .com 顶级域名服务器（迭代查询）</strong></li>
</ul>
<ol>
<li><strong>动作</strong>：本地 DNS 服务器向 <code>.com</code> TLD 服务器（<code>dns.com</code>）查询 <code>1chendian2.github.io</code> 的 IP。  </li>
<li><strong>TLD 服务器回复</strong>：“我不知道 <code>1chendian2.github.io</code> 的 IP，但 <code>abc.com</code> 的权威域名服务器（<code>dns.abc.com</code>）的地址是 <code>Y.Y.Y.Y</code>，你去问它。”</li>
</ol>
<blockquote>
<p><strong>报文计数</strong>：  </p>
<ul>
<li>查询报文 3（本地 DNS → .com TLD）  </li>
<li>响应报文 3（.com TLD → 本地 DNS，返回 <code>dns.abc.com</code> 地址）</li>
</ul>
</blockquote>
<hr>
<ul>
<li><strong>⑤ 本地 DNS → abc.com 权威域名服务器（迭代查询）</strong></li>
</ul>
<ol>
<li><strong>动作</strong>：本地 DNS 服务器向 <code>dns.abc.com</code>（权威服务器）查询 <code>1chendian2.github.io</code> 的 IP。  </li>
<li><strong>权威服务器回复</strong>：“<code>1chendian2.github.io</code> 的 IP 是 <code>192.0.2.100</code>。”</li>
</ol>
<blockquote>
<p><strong>报文计数</strong>：  </p>
<ul>
<li>查询报文 4（本地 DNS → <code>dns.abc.com</code>）  </li>
<li>响应报文 4（<code>dns.abc.com</code> → 本地 DNS，返回 <code>1chendian2.github.io</code> 的 IP）</li>
</ul>
</blockquote>
<hr>
<ul>
<li><strong>⑥ 本地 DNS 缓存并返回结果给客户机</strong></li>
</ul>
<ol>
<li><strong>动作</strong>：本地 DNS 服务器缓存 <code>1chendian2.github.io</code> 的 IP（<code>192.0.2.100</code>），然后返回给客户机。  </li>
<li><strong>客户机</strong> 拿到 IP 后，即可访问 <code>1chendian2.github.io</code>。</li>
</ol>
<blockquote>
<p><strong>报文计数</strong>：  </p>
<ul>
<li>响应报文 5（本地 DNS → 客户机，返回最终 IP）</li>
</ul>
</blockquote>
<hr>
<ul>
<li><strong>总结（报文流程）</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>步骤</strong></th>
<th><strong>查询方 → 被查询方</strong></th>
<th><strong>查询方式</strong></th>
<th><strong>返回内容</strong></th>
<th><strong>报文类型</strong></th>
</tr>
</thead>
<tbody><tr>
<td>①</td>
<td>客户机 → 本地 DNS</td>
<td>递归查询</td>
<td>（无缓存，需进一步查询）</td>
<td>查询 1</td>
</tr>
<tr>
<td>②</td>
<td>本地 DNS → 根服务器</td>
<td>迭代查询</td>
<td><code>.com</code> TLD 服务器地址</td>
<td>查询 2 + 响应 2</td>
</tr>
<tr>
<td>③</td>
<td>本地 DNS → .com TLD</td>
<td>迭代查询</td>
<td><code>abc.com</code> 权威服务器地址</td>
<td>查询 3 + 响应 3</td>
</tr>
<tr>
<td>④</td>
<td>本地 DNS → <code>dns.abc.com</code></td>
<td>迭代查询</td>
<td><code>1chendian2.github.io</code> 的 IP</td>
<td>查询 4 + 响应 4</td>
</tr>
<tr>
<td>⑤</td>
<td>本地 DNS → 客户机</td>
<td>递归响应</td>
<td><code>192.0.2.100</code></td>
<td>响应 5</td>
</tr>
</tbody></table>
<p><strong>总报文数</strong>：5 次查询&#x2F;响应（若严格按 UDP 计算，可视为 8 个报文）。  </p>
<hr>
<ul>
<li><strong>DNS 缓存优化</strong></li>
</ul>
<ol>
<li><strong>本地 DNS 缓存</strong>：存储最近查询的域名，减少重复查询。  </li>
<li><strong>客户机缓存</strong>：如浏览器、操作系统也会缓存 DNS 记录（TTL 到期后清除）。  </li>
<li><strong>减少查询次数</strong>：若缓存命中，可跳过部分步骤（如直接问权威服务器）。</li>
</ol>
<hr>
<ul>
<li><strong>关键点</strong>  </li>
<li></li>
</ul>
<p>✅ <strong>递归查询</strong>：客户机要求本地 DNS 服务器“必须给我最终答案”。<br>✅ <strong>迭代查询</strong>：本地 DNS 服务器一步步问其他服务器（根 → TLD → 权威）。<br>✅ <strong>UDP 报文</strong>：DNS 默认使用 UDP（快速、轻量），但大响应可能用 TCP。<br>✅ <strong>缓存机制</strong>：提高解析速度，减少根服务器压力。  </p>
<p>这样，<code>1chendian2.github.io</code> 的 IP 就被成功解析，计算机可以访问该网站了！ </p>
<h4 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h4><p><strong>FTP 工作原理详解（以文件传输为例）</strong>  </p>
<p>FTP（File Transfer Protocol，文件传输协议）用于在客户端和服务器之间传输文件。它使用 <strong>两个独立的 TCP 连接</strong>：<strong>控制连接</strong>（端口 21）和 <strong>数据连接</strong>（端口 20）。下面以客户端上传文件 <code>example.txt</code> 到 FTP 服务器为例，详细说明 FTP 的工作流程。  </p>
<hr>
<ol>
<li><strong>FTP 连接建立（控制连接）</strong></li>
</ol>
<p><strong>① 客户端发起控制连接（TCP 三次握手）</strong></p>
<ul>
<li><strong>动作</strong>：客户端向 FTP 服务器的 <strong>21 端口</strong> 发起 TCP 连接请求（SYN）。  </li>
<li><strong>服务器响应</strong>：服务器接受连接（SYN-ACK），完成三次握手（ACK）。  </li>
<li><strong>作用</strong>：建立 <strong>控制连接</strong>，用于发送 FTP 命令（如登录、切换目录、上传&#x2F;下载请求等）。</li>
</ul>
<blockquote>
<p><strong>示例命令</strong>（客户端发送）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USER username  // 输入用户名</span><br><span class="line">PASS password  // 输入密码</span><br></pre></td></tr></table></figure></blockquote>
<hr>
<ol start="2">
<li><strong>文件传输（数据连接）</strong><br>FTP 的数据连接有两种模式：<strong>主动模式（PORT）</strong> 和 <strong>被动模式（PASV）</strong>。</li>
</ol>
<p><strong>（1）主动模式（PORT）—— 服务器主动连接客户端</strong><br><strong>② 客户端发送 PORT 命令</strong></p>
<ul>
<li><strong>动作</strong>：客户端告诉服务器：“我在 <code>IP:端口</code>（如 <code>192.168.1.100:5000</code>）等你，请用 <strong>20 端口</strong> 连接我。”  </li>
<li><strong>服务器响应</strong>：服务器从 <strong>20 端口</strong> 发起 TCP 连接至客户端指定的端口（<code>192.168.1.100:5000</code>）。</li>
</ul>
<p><strong>③ 数据传输</strong></p>
<ul>
<li><strong>动作</strong>：客户端发送 <code>STOR example.txt</code>（上传）或 <code>RETR example.txt</code>（下载）。  </li>
<li><strong>数据流</strong>：文件内容通过 <strong>数据连接</strong>（20 → 5000）传输。</li>
</ul>
<blockquote>
<p><strong>适用场景</strong>：客户端位于公网（无防火墙限制），服务器能直接访问客户端。  </p>
</blockquote>
<hr>
<p><strong>（2）被动模式（PASV）—— 客户端主动连接服务器</strong><br><strong>② 客户端发送 PASV 命令</strong></p>
<ul>
<li><strong>动作</strong>：客户端请求服务器：“请告诉我一个端口，我来连接你。”  </li>
<li><strong>服务器响应</strong>：服务器随机开放一个端口（如 <code>3000</code>），并回复：<code>227 Entering Passive Mode (192.168.1.1,3000)</code>。</li>
</ul>
<p><strong>③ 客户端连接服务器端口</strong></p>
<ul>
<li><strong>动作</strong>：客户端主动连接服务器的 <code>3000</code> 端口，建立数据通道。</li>
</ul>
<p><strong>④ 数据传输</strong></p>
<ul>
<li><strong>动作</strong>：客户端发送 <code>STOR example.txt</code> 或 <code>RETR example.txt</code>。  </li>
<li><strong>数据流</strong>：文件内容通过 <strong>数据连接</strong>（客户端 → 3000）传输。</li>
</ul>
<blockquote>
<p><strong>适用场景</strong>：客户端位于 NAT&#x2F;防火墙后（如家庭网络），无法被服务器直接访问。  </p>
</blockquote>
<hr>
<ol start="3">
<li><strong>连接关闭</strong><br><strong>⑤ 传输完成，关闭连接</strong></li>
</ol>
<ul>
<li><strong>控制连接</strong>：保持开放，可继续发送其他命令（如 <code>LIST</code> 查看目录）。  </li>
<li><strong>数据连接</strong>：传输完成后立即关闭。  </li>
<li><strong>退出</strong>：客户端发送 <code>QUIT</code>，服务器关闭控制连接。</li>
</ul>
<hr>
<ul>
<li><strong>FTP 关键特点总结</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>双通道</strong></td>
<td>控制连接（21） + 数据连接（20 或 PASV 随机端口）</td>
</tr>
<tr>
<td><strong>传输模式</strong></td>
<td>主动模式（PORT） &#x2F; 被动模式（PASV）</td>
</tr>
<tr>
<td><strong>协议依赖</strong></td>
<td>基于 TCP，确保可靠传输</td>
</tr>
<tr>
<td><strong>权限管理</strong></td>
<td>支持用户名&#x2F;密码认证，也可匿名登录（anonymous）</td>
</tr>
<tr>
<td><strong>跨平台</strong></td>
<td>可在不同操作系统（Windows&#x2F;Linux）间传输文件</td>
</tr>
</tbody></table>
<hr>
<ul>
<li><strong>FTP 与 HTTP 对比</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>对比项</strong></th>
<th><strong>FTP</strong></th>
<th><strong>HTTP</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>连接方式</strong></td>
<td>双连接（控制+数据）</td>
<td>单连接（请求-响应后关闭）</td>
</tr>
<tr>
<td><strong>传输效率</strong></td>
<td>适合大文件（可断点续传）</td>
<td>适合小文件（无状态）</td>
</tr>
<tr>
<td><strong>安全性</strong></td>
<td>默认明文（可搭配 FTPS&#x2F;SFTP）</td>
<td>可加密（HTTPS）</td>
</tr>
<tr>
<td><strong>用途</strong></td>
<td>文件管理（上传&#x2F;下载&#x2F;删除）</td>
<td>网页访问（GET&#x2F;POST）</td>
</tr>
</tbody></table>
<hr>
<ul>
<li><strong>实际应用场景</strong></li>
</ul>
<ol>
<li><strong>网站维护</strong>：通过 FTP 上传网页文件至服务器。  </li>
<li><strong>企业备份</strong>：自动备份数据库至远程 FTP 存储。  </li>
<li><strong>匿名共享</strong>：提供公共文件下载（如 Linux 镜像站）。</li>
</ol>
<p>通过上述流程，FTP 实现了高效、灵活的文件传输，适用于各种网络环境！ </p>
<h4 id="DNS（域名系统）-相关的记录类型"><a href="#DNS（域名系统）-相关的记录类型" class="headerlink" title="DNS（域名系统） 相关的记录类型"></a>DNS（域名系统） 相关的记录类型</h4><ol>
<li>A记录（Address Record）</li>
</ol>
<ul>
<li>作用：将域名指向一个 IPv4地址（如 192.0.2.1）。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">example.com.    A    192.0.2.1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示访问 example.com 时解析到 192.0.2.1。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>类似记录：</li>
</ul>
<p>AAAA记录：指向IPv6地址（如 2001:db8::1）。</p>
<ul>
<li>负载均衡：</li>
</ul>
<p>通过轮询A记录来实现。</p>
<ol start="2">
<li>CNAME记录（Canonical Name Record）</li>
</ol>
<ul>
<li>作用：将域名 别名 指向另一个域名（真实域名），实现间接解析。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">www.example.com.    CNAME    example.com.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">访问 www.example.com 时，实际解析到 example.com 的IP。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>注意：</li>
</ul>
<p>CNAME不能与其他记录（如MX、TXT）共存。常用于CDN、子域名统一管理。</p>
<h4 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h4><ul>
<li><p>发邮件：用户代理 → SMTP → 发送方SMTP服务器 → SMTP → 接收方SMTP服务器。</p>
</li>
<li><p>收邮件：用户代理 ← POP3&#x2F;IMAP ← 接收方服务器。</p>
</li>
<li><p>异步通信：邮件存储在服务器，收件人随时拉取。</p>
</li>
</ul>
<p>通过SMTP的“推”和POP3的“拉”，电子邮件实现了灵活、可靠的异步通信。</p>
<h4 id="万维网的工作流程"><a href="#万维网的工作流程" class="headerlink" title="万维网的工作流程"></a>万维网的工作流程</h4><ul>
<li>万维网的工作流程如下：</li>
</ul>
<ol>
<li>服务器监听TCP端口80，等待连接请求。  </li>
<li>浏览器发起请求，与服务器建立TCP连接。  </li>
<li>浏览器发送HTTP请求获取网页。  </li>
<li>服务器处理请求，构建所需信息并通过HTTP响应返回。  </li>
<li>浏览器解析响应并显示网页。  </li>
<li>释放TCP连接。</li>
</ol>
<h4 id="鼠标点击一个网页链接，会发生什么？"><a href="#鼠标点击一个网页链接，会发生什么？" class="headerlink" title="鼠标点击一个网页链接，会发生什么？"></a>鼠标点击一个网页链接，会发生什么？</h4><ol>
<li>应用层<br>DHCP（若未配置IP）：<br>用户主机通过DHCP协议自动获取本地网络的IP地址、子网掩码、默认网关等配置（若未手动配置）。</li>
</ol>
<p>DNS：<br>浏览器解析URL中的域名 <a target="_blank" rel="noopener" href="http://www.tsinghua.edu.cn,向本地dns服务器发起查询请求,通过递归/%E8%BF%AD%E4%BB%A3%E6%9F%A5%E8%AF%A2%E6%9C%80%E7%BB%88%E8%8E%B7%E5%8F%96%E7%9B%AE%E6%A0%87%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84IP%E5%9C%B0%E5%9D%80%EF%BC%88%E5%A6%82">www.tsinghua.edu.cn，向本地DNS服务器发起查询请求，通过递归/迭代查询最终获取目标服务器的IP地址（如</a> 166.111.4.100）。</p>
<p>HTTP：<br>浏览器生成HTTP请求（如 GET &#x2F;chn&#x2F;index.htm），并依赖下层协议（TCP）传输。</p>
<ol start="2">
<li>传输层<br>TCP连接：<br>浏览器通过TCP协议与服务器建立可靠连接（三次握手），目标端口为80（HTTP默认端口）。</li>
</ol>
<p>若使用HTTPS：还需通过TLS协议加密（涉及SSL握手）。</p>
<p>UDP（可选）：<br>DNS查询通常使用UDP协议（端口53），因其无需建立连接，适合快速的小数据包传输。</p>
<ol start="3">
<li>网络层（网际层）<br>IP路由：<br>HTTP请求被封装为IP数据包，源IP（用户主机）和目标IP（清华大学服务器）由路由器基于路由表逐跳转发。</li>
</ol>
<p>ARP：<br>在局域网内，通过ARP协议将网关IP地址解析为MAC地址，确保数据包能通过以太网传输。</p>
<ol start="4">
<li>数据链路层<br>以太网（CSMA&#x2F;CD）：<br>在本地网络中，数据包封装为以太网帧，通过MAC地址寻址。若使用有线网络，遵循CSMA&#x2F;CD冲突检测机制（交换机环境下冲突较少）。</li>
</ol>
<p>PPP（广域网）：<br>若用户通过ISP拨号上网，数据链路层可能使用PPP协议封装IP数据包。</p>
<ol start="5">
<li>物理层<br>数据最终转换为电信号（有线）或电磁波（无线），通过物理介质（如光纤、双绞线）传输至下一跳设备（如路由器、交换机）。</li>
</ol>
<h3 id="网络杂谈"><a href="#网络杂谈" class="headerlink" title="网络杂谈"></a>网络杂谈</h3><h4 id="嗯…-无法访问此页面"><a href="#嗯…-无法访问此页面" class="headerlink" title="嗯… 无法访问此页面"></a>嗯… 无法访问此页面</h4><p><em>已重置连接。请尝试：检查连接、检查代理和防火墙ERR_CONNECTION_RESET</em></p>
<ol>
<li>dns服务器解析错误：首先电脑出现网页无法正常访问而其他应用正常，大多数人都会想到是否是dns服务器出现了解析的问题，所以他们做的第一件事情通常是将DHCP修改为手动配置dns，当然，我一开始也是这样考虑的，于是我修改了手动dns，将dns服务器配置为<code>114.114.114.114</code>或者国内一些主流大厂的dns服务器（如腾讯和阿里的dns服务器），但是在修改过后且用<code>ipconfig /flushdns</code>命令清理dns缓存后，我发现该问题依旧会复现，且在发生问题的时候，通过终端是可以<code>ping</code>通发生问题网站的网址的，也没有发生丢包的情况，且用<code>nslookup</code>命令查看dns服务器解析目标网站的ip地址，也是正常解析的，因此我排除了dns出现问题的可能。</li>
</ol>
<h4 id="拨号上网"><a href="#拨号上网" class="headerlink" title="拨号上网"></a>拨号上网</h4><p><strong>拨号上网（Dial-up Internet Access）</strong> 是一种通过电话线模拟信号传输数据的早期互联网接入技术，曾在20世纪90年代至21世纪初广泛使用。其核心特点是利用电话网络和调制解调器（Modem）实现计算机与互联网服务提供商（ISP）的连接。</p>
<hr>
<p><strong>1. 工作原理</strong></p>
<ul>
<li><p><strong>调制解调器（Modem）</strong>：<br>将计算机的 <strong>数字信号</strong> 转换为电话线可传输的 <strong>模拟信号</strong>（调制），反之亦然（解调）。  </p>
<ul>
<li>拨号时，Modem会发出熟悉的“嘀嘀嘀…滋滋滋”握手音。</li>
</ul>
</li>
<li><p><strong>拨号过程</strong>：  </p>
<ol>
<li>用户通过计算机拨叫ISP提供的电话号码（如 <code>16300</code>）。  </li>
<li>电话线接通ISP的调制解调器池（Modem Pool）。  </li>
<li>双方Modem协商连接参数（如速率：56 Kbps）。  </li>
<li>建立PPP（点对点协议）连接，分配动态IP地址。</li>
</ol>
</li>
</ul>
<hr>
<p><strong>2. 主要特点</strong></p>
<ul>
<li><p><strong>低速传输</strong>：  </p>
<ul>
<li>理论最大速率 <strong>56 Kbps</strong>（实际受线路质量影响可能仅30-40 Kbps）。  </li>
<li>下载1MB文件需约3-5分钟，无法支持视频流媒体。</li>
</ul>
</li>
<li><p><strong>独占电话线</strong>：  </p>
<ul>
<li>上网时电话无法接听或拨出（“占线”）。  </li>
<li>部分家庭安装“分线器”但会降低网速。</li>
</ul>
</li>
<li><p><strong>按需连接</strong>：  </p>
<ul>
<li>每次上网需手动拨号，按时间计费（早期按分钟收费）。</li>
</ul>
</li>
</ul>
<hr>
<p><strong>3. 关键组件</strong></p>
<table>
<thead>
<tr>
<th><strong>组件</strong></th>
<th><strong>作用</strong></th>
</tr>
</thead>
<tbody><tr>
<td>调制解调器（Modem）</td>
<td>数模信号转换，支持拨号与数据传输。</td>
</tr>
<tr>
<td>电话线（PSTN）</td>
<td>物理传输介质，使用普通铜质电话线路。</td>
</tr>
<tr>
<td>ISP接入服务器</td>
<td>提供拨号号码、认证账号（如用户名&#x2F;密码）、分配IP地址。</td>
</tr>
<tr>
<td>PPP协议</td>
<td>管理数据封装、错误检测和IP地址分配（如 <code>PPPoE</code> 衍生协议用于后续宽带）。</td>
</tr>
</tbody></table>
<hr>
<p><strong>4. 与宽带对比</strong></p>
<table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong>拨号上网</strong></th>
<th><strong>现代宽带（如光纤）</strong></th>
</tr>
</thead>
<tbody><tr>
<td>速度</td>
<td>56 Kbps</td>
<td>100 Mbps - 1 Gbps+</td>
</tr>
<tr>
<td>连接方式</td>
<td>按需拨号，临时连接</td>
<td>始终在线（Always-On）</td>
</tr>
<tr>
<td>电话线影响</td>
<td>上网时电话不可用</td>
<td>独立线路（电话&#x2F;网络分离）</td>
</tr>
<tr>
<td>典型费用</td>
<td>按分钟计费 + 电话费</td>
<td>包月固定费用</td>
</tr>
</tbody></table>
<hr>
<p><strong>5. 为什么被淘汰？</strong></p>
<ul>
<li><strong>速度瓶颈</strong>：无法满足网页多媒体化（如图片、视频）需求。  </li>
<li><strong>技术替代</strong>：  <ul>
<li><strong>DSL（如ADSL）</strong>：利用电话线高频频段，实现上网&#x2F;通话并行。  </li>
<li><strong>光纤&#x2F; Cable</strong>：更高带宽、更低延迟。</li>
</ul>
</li>
<li><strong>用户体验差</strong>：连接不稳定，易受干扰（如天气、电磁噪声）。</li>
</ul>
<hr>
<p><strong>6. 历史意义</strong></p>
<ul>
<li><strong>互联网普及先驱</strong>：推动早期家庭和中小企业接入互联网。  </li>
<li><strong>文化符号</strong>：拨号音成为一代人的集体记忆（如美国在线AOL的“Welcome”语音）。  </li>
<li><strong>技术基础</strong>：PPP协议衍生出PPPoE，至今用于部分宽带认证。</li>
</ul>
<hr>
<p><strong>常见问题</strong><br> Q1：现在还能用拨号上网吗？  </p>
<ul>
<li>少数偏远地区或特殊场景（如备份连接）仍支持，但主流ISP已逐步关闭服务。</li>
</ul>
<p> Q2：为什么拨号音听起来像“噪音”？  </p>
<ul>
<li>这是Modem的 <strong>握手协议（Handshaking）</strong>，通过不同频率音频协商参数（如V.34&#x2F;V.90标准）。</li>
</ul>
<p> Q3：拨号上网的IP地址是固定的吗？  </p>
<ul>
<li>通常是动态IP，每次拨号重新分配（类似现代家庭宽带的DHCP）。</li>
</ul>
<h1 id="本书梳理"><a href="#本书梳理" class="headerlink" title="本书梳理"></a>本书梳理</h1><h2 id="计算机网络体系结构"><a href="#计算机网络体系结构" class="headerlink" title="计算机网络体系结构"></a>计算机网络体系结构</h2><h3 id="计算机网络概述"><a href="#计算机网络概述" class="headerlink" title="计算机网络概述"></a>计算机网络概述</h3><h4 id="计算机网络的组成"><a href="#计算机网络的组成" class="headerlink" title="计算机网络的组成"></a>计算机网络的组成</h4><h4 id="电路、报文、分组交换"><a href="#电路、报文、分组交换" class="headerlink" title="电路、报文、分组交换"></a>电路、报文、分组交换</h4><h4 id="计算机网络的分类"><a href="#计算机网络的分类" class="headerlink" title="计算机网络的分类"></a>计算机网络的分类</h4><h4 id="计算机网络的性能指标"><a href="#计算机网络的性能指标" class="headerlink" title="计算机网络的性能指标"></a>计算机网络的性能指标</h4><h3 id="计算机网络的分层"><a href="#计算机网络的分层" class="headerlink" title="计算机网络的分层"></a>计算机网络的分层</h3><h4 id="ISO-OSI模型"><a href="#ISO-OSI模型" class="headerlink" title="ISO&#x2F;OSI模型"></a>ISO&#x2F;OSI模型</h4><h4 id="TCP-IP模型"><a href="#TCP-IP模型" class="headerlink" title="TCP&#x2F;IP模型"></a>TCP&#x2F;IP模型</h4><hr>
<h2 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h2><h3 id="通信基础"><a href="#通信基础" class="headerlink" title="通信基础"></a>通信基础</h3><h4 id="波特率、比特率"><a href="#波特率、比特率" class="headerlink" title="波特率、比特率"></a>波特率、比特率</h4><h4 id="奈奎斯特、香农定理"><a href="#奈奎斯特、香农定理" class="headerlink" title="奈奎斯特、香农定理"></a>奈奎斯特、香农定理</h4><h4 id="曼彻斯特编码"><a href="#曼彻斯特编码" class="headerlink" title="曼彻斯特编码"></a>曼彻斯特编码</h4><h4 id="QAM技术"><a href="#QAM技术" class="headerlink" title="QAM技术"></a>QAM技术</h4><h3 id="传输介质"><a href="#传输介质" class="headerlink" title="传输介质"></a>传输介质</h3><h4 id="双绞线、同轴电缆、光纤、无线介质"><a href="#双绞线、同轴电缆、光纤、无线介质" class="headerlink" title="双绞线、同轴电缆、光纤、无线介质"></a>双绞线、同轴电缆、光纤、无线介质</h4><h4 id="物理接口的特性"><a href="#物理接口的特性" class="headerlink" title="物理接口的特性"></a>物理接口的特性</h4><h3 id="设备"><a href="#设备" class="headerlink" title="设备"></a>设备</h3><h4 id="集线器"><a href="#集线器" class="headerlink" title="集线器"></a>集线器</h4><h4 id="中继器"><a href="#中继器" class="headerlink" title="中继器"></a>中继器</h4><hr>
<h2 id="数据链路层-1"><a href="#数据链路层-1" class="headerlink" title="数据链路层"></a>数据链路层</h2><h3 id="封装成帧：组帧方法（4种）"><a href="#封装成帧：组帧方法（4种）" class="headerlink" title="封装成帧：组帧方法（4种）"></a>封装成帧：组帧方法（4种）</h3><h3 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h3><h3 id="差错控制（检错-纠错）"><a href="#差错控制（检错-纠错）" class="headerlink" title="差错控制（检错&#x2F;纠错）"></a>差错控制（检错&#x2F;纠错）</h3><h3 id="流量控制与可靠传输（交织）"><a href="#流量控制与可靠传输（交织）" class="headerlink" title="流量控制与可靠传输（交织）"></a>流量控制与可靠传输（交织）</h3><h4 id="ARQ"><a href="#ARQ" class="headerlink" title="ARQ"></a>ARQ</h4><h5 id="非连续ARQ-SW"><a href="#非连续ARQ-SW" class="headerlink" title="非连续ARQ(SW)"></a>非连续ARQ(SW)</h5><h5 id="连续ARQ-GN-SR"><a href="#连续ARQ-GN-SR" class="headerlink" title="连续ARQ(GN\SR)"></a>连续ARQ(GN\SR)</h5><h3 id="介质访问控制-FDM-TDM-CDM-WDM-纯LOHA-时隙ALOHA-CSMA-CD-CSMA-CA-令牌传递"><a href="#介质访问控制-FDM-TDM-CDM-WDM-纯LOHA-时隙ALOHA-CSMA-CD-CSMA-CA-令牌传递" class="headerlink" title="介质访问控制(FDM\TDM\CDM\WDM\纯LOHA\时隙ALOHA\CSMA\\CD\CSMA\\CA\令牌传递)"></a>介质访问控制(FDM\TDM\CDM\WDM\纯LOHA\时隙ALOHA\CSMA\\CD\CSMA\\CA\令牌传递)</h3><h3 id="局域网-IEEE802-3-IEEE802-11-VLAN"><a href="#局域网-IEEE802-3-IEEE802-11-VLAN" class="headerlink" title="局域网(IEEE802.3\IEEE802.11\VLAN)"></a>局域网(IEEE802.3\IEEE802.11\VLAN)</h3><h3 id="广域网-PPP"><a href="#广域网-PPP" class="headerlink" title="广域网(PPP)"></a>广域网(PPP)</h3><h3 id="设备-网桥、交换机"><a href="#设备-网桥、交换机" class="headerlink" title="设备(网桥、交换机)"></a>设备(网桥、交换机)</h3><hr>
<h2 id="网络层-1"><a href="#网络层-1" class="headerlink" title="网络层"></a>网络层</h2><h3 id="网络层提供的两种服务、路由器的功能、SDN"><a href="#网络层提供的两种服务、路由器的功能、SDN" class="headerlink" title="网络层提供的两种服务、路由器的功能、SDN"></a>网络层提供的两种服务、路由器的功能、SDN</h3><h3 id="IPv4-NAT-划分子网-路由聚合-ARP-DCHP-ICMP"><a href="#IPv4-NAT-划分子网-路由聚合-ARP-DCHP-ICMP" class="headerlink" title="IPv4\NAT\划分子网\路由聚合\ARP\DCHP\ICMP"></a>IPv4\NAT\划分子网\路由聚合\ARP\DCHP\ICMP</h3><h3 id="IPv6-v4-v6转换"><a href="#IPv6-v4-v6转换" class="headerlink" title="IPv6\v4-v6转换"></a>IPv6\v4-v6转换</h3><h3 id="距离向量路由算法（协议）、链路状态算法（协议）、RIP-OSPF-BGP（路径向量协议）"><a href="#距离向量路由算法（协议）、链路状态算法（协议）、RIP-OSPF-BGP（路径向量协议）" class="headerlink" title="距离向量路由算法（协议）、链路状态算法（协议）、RIP\OSPF\BGP（路径向量协议）"></a>距离向量路由算法（协议）、链路状态算法（协议）、RIP\OSPF\BGP（路径向量协议）</h3><h3 id="IP多播、IGMP"><a href="#IP多播、IGMP" class="headerlink" title="IP多播、IGMP"></a>IP多播、IGMP</h3><h3 id="移动IP"><a href="#移动IP" class="headerlink" title="移动IP"></a>移动IP</h3><h3 id="冲突域和广播域、路由器的组成和功能"><a href="#冲突域和广播域、路由器的组成和功能" class="headerlink" title="冲突域和广播域、路由器的组成和功能"></a>冲突域和广播域、路由器的组成和功能</h3><hr>
<h2 id="传输层-1"><a href="#传输层-1" class="headerlink" title="传输层"></a>传输层</h2><h3 id="4个作用"><a href="#4个作用" class="headerlink" title="4个作用"></a>4个作用</h3><h3 id="UDP-格式、检验"><a href="#UDP-格式、检验" class="headerlink" title="UDP(格式、检验)"></a>UDP(格式、检验)</h3><h3 id="TCP-格式、连接管理、可靠传输、流量控制、拥塞控制"><a href="#TCP-格式、连接管理、可靠传输、流量控制、拥塞控制" class="headerlink" title="TCP(格式、连接管理、可靠传输、流量控制、拥塞控制)"></a>TCP(格式、连接管理、可靠传输、流量控制、拥塞控制)</h3><hr>
<h2 id="应用层-1"><a href="#应用层-1" class="headerlink" title="应用层"></a>应用层</h2><h3 id="C-S-P2P"><a href="#C-S-P2P" class="headerlink" title="C&#x2F;S \ P2P"></a>C&#x2F;S \ P2P</h3><h3 id="DNS-3个组成部分"><a href="#DNS-3个组成部分" class="headerlink" title="DNS(3个组成部分)"></a>DNS(3个组成部分)</h3><h3 id="FTP-两条路径"><a href="#FTP-两条路径" class="headerlink" title="FTP(两条路径)"></a>FTP(两条路径)</h3><h3 id="E-MAIL-SMTP-POP3-MIME"><a href="#E-MAIL-SMTP-POP3-MIME" class="headerlink" title="E-MAIL(SMTP\POP3\MIME)"></a>E-MAIL(SMTP\POP3\MIME)</h3><h3 id="WWW-HTTP"><a href="#WWW-HTTP" class="headerlink" title="WWW(HTTP)"></a>WWW(HTTP)</h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="/">陈淀</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://chenhongyang86.fun/2025/05/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%88408%E8%80%83%E7%A0%94%EF%BC%89/">https://chenhongyang86.fun/2025/05/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%88408%E8%80%83%E7%A0%94%EF%BC%89/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://chenhongyang86.fun" target="_blank">陈同学的桃花源</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/%E6%A3%AE%E6%9E%97-%E8%BD%A6%E7%AB%99.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/WeChatPay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/WeChatPay.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/AliPay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/AliPay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/05/25/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/" title="线性代数"><img class="cover" src="/img/%E4%BA%91-%E5%A4%A9%E7%A9%BA-%E5%B1%B1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">线性代数</div></div><div class="info-2"><div class="info-item-1">向量齐次线性方程组的解 </div></div></div></a><a class="pagination-related" href="/2025/05/06/Android%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B/" title="Android开发课程"><img class="cover" src="/img/%E4%B8%98%E9%99%B5-%E4%BA%91-%E5%9C%BA%E5%9C%B0.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Android开发课程</div></div><div class="info-2"><div class="info-item-1">河南理工大学Android开发课程：共40学时（24理论学时、16实践学时），学分2.5。 Android四层结构  应用层(System Apps)系统内置的应用程序以及非系统级的应用程序都属于应用层，负责与用户进行交互，一般使用Java或者Kotlin开发，也就是我们所说的应用层开发。  应用框架层(Java API Framework)这一层为应用层开发提供所需要的Java API，也就是常说的Android系统的Java源码，这一层由Java代码编写，所以叫JavaFramework。  系统运行库层(Native)从图中可以看出这里分为了两个部分，分别是C&#x2F;C++程序库和Android运行时库。  C&#x2F;C++库这些C&#x2F;C++库程序可以被应用框架层所使用，至于为什么Android系统要使用C&#x2F;C++库，而不都用Java库，原因主要是C&#x2F;C++代码执行效率更高，而且很多功能有成熟的C++代码，不用重新写  Android运行时库     分为核心库和ART。*（Android运行时环境（ART）自Android...</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/My.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">陈淀</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">72</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/1chendian2"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons"><a class="social-icon" href="/img/QQQR.jpg" target="_blank" title="QQ"><i class="fa-brands fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="/img/WeQR.jpg" target="_blank" title="WeChat"><i class="fa-brands fa-weixin" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎阁下光临此博客，让我们一起文峰采玉、墨海探珠！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.</span> <span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6"><span class="toc-number">1.1.</span> <span class="toc-text">数据链路层的流量控制与可靠传输机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#GNB"><span class="toc-number">1.1.1.</span> <span class="toc-text">GNB</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SR"><span class="toc-number">1.1.2.</span> <span class="toc-text">SR</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88TDM%EF%BC%88%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8%EF%BC%89%E5%AF%B9%E5%B8%A6%E5%AE%BD%E6%9C%89%E8%A6%81%E6%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text">为什么TDM（时分复用）对带宽有要求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A4%E7%89%8C%E7%8E%AF%E7%BD%91%E7%BB%9C%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.</span> <span class="toc-text">令牌环网络的工作流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%85%A8%E5%8F%8C%E5%B7%A5%E6%A8%A1%E5%BC%8F%E4%B8%8B%E4%B8%8D%E9%9C%80%E8%A6%81%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%EF%BC%9F"><span class="toc-number">1.4.</span> <span class="toc-text">为什么全双工模式下不需要碰撞检测？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%BD%91%E5%8D%A1%E5%90%8C%E6%97%B6%E6%B6%89%E5%8F%8A%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E7%89%A9%E7%90%86%E5%B1%82%EF%BC%9F"><span class="toc-number">1.5.</span> <span class="toc-text">为什么网卡同时涉及数据链路层和物理层？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSMA-CD%E5%8D%8F%E8%AE%AE%E4%B8%AD%E6%9C%80%E7%9F%AD%E5%B8%A7%E9%95%BF%E7%9A%84%E7%95%8C%E5%AE%9A"><span class="toc-number">1.6.</span> <span class="toc-text">CSMA&#x2F;CD协议中最短帧长的界定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%EF%BC%9A%E7%89%A9%E7%90%86%E4%B8%8A%E6%98%9F%E5%9E%8B%E7%BB%93%E6%9E%84%E3%80%81%E9%80%BB%E8%BE%91%E4%B8%8A%E6%98%AF%E6%80%BB%E7%BA%BF%E5%9E%8B%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.</span> <span class="toc-text">以太网：物理上星型结构、逻辑上是总线型结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IEEE-802-11-%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">1.8.</span> <span class="toc-text">IEEE 802.11 无线局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%89%E5%9B%BA%E5%AE%9A%E8%AE%BE%E6%96%BD%E7%9A%84"><span class="toc-number">1.8.1.</span> <span class="toc-text">有固定设施的</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A0%E5%9B%BA%E5%AE%9A%E8%AE%BE%E6%96%BD%E7%9A%84%E8%87%AA%E7%BB%84%E7%BB%87%E7%BD%91%E7%BB%9C"><span class="toc-number">1.8.2.</span> <span class="toc-text">无固定设施的自组织网络</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PPP-P"><span class="toc-number">1.9.</span> <span class="toc-text">PPP-P</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%BD%AC%E5%8F%91%E6%9C%BA%E5%88%B6%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="toc-number">1.10.</span> <span class="toc-text">不同链路层协议的转发机制的差异</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E5%9F%9F%EF%BC%88Broadcast-Domain%EF%BC%89%E4%B8%8E%E5%86%B2%E7%AA%81%E5%9F%9F%EF%BC%88Collision-Domain%EF%BC%89"><span class="toc-number">1.11.</span> <span class="toc-text">广播域（Broadcast Domain）与冲突域（Collision Domain）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E2%80%9C%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E4%B8%AD%EF%BC%8C%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BA%A4%E7%BB%87%E5%9C%A8%E4%B8%80%E8%B5%B7%E7%9A%84%E2%80%9D%EF%BC%9F"><span class="toc-number">1.12.</span> <span class="toc-text">如何理解“数据链路层中，流量控制与可靠传输机制是交织在一起的”？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%88NAT%EF%BC%89"><span class="toc-number">2.1.</span> <span class="toc-text">网络地址转换（NAT）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A7%81%E6%9C%89IP%E5%9C%B0%E5%9D%80"><span class="toc-number">2.2.</span> <span class="toc-text">私有IP地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E8%B7%AF%E7%94%B1%E5%99%A8%E8%BF%9E%E6%8E%A5IPv4%E5%92%8CIPv6%E7%BD%91%E7%BB%9C"><span class="toc-number">2.3.</span> <span class="toc-text">通过路由器连接IPv4和IPv6网络</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DHCP"><span class="toc-number">2.4.</span> <span class="toc-text">DHCP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IPv6%E7%9A%84QoS"><span class="toc-number">2.5.</span> <span class="toc-text">IPv6的QoS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RIP-%E4%B8%AD%E7%9A%84%E6%B0%B4%E5%B9%B3%E5%88%86%E5%89%B2%E4%B8%8E%E6%AF%92%E6%80%A7%E9%80%86%E8%BD%AC"><span class="toc-number">2.6.</span> <span class="toc-text">RIP 中的水平分割与毒性逆转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8-IP-%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.7.</span> <span class="toc-text">移动 IP 通信过程示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E4%BA%A4%E4%BB%98"><span class="toc-number">2.8.</span> <span class="toc-text">路由器的交付</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E4%BA%A4%E4%BB%98-%E5%85%A8%E7%A8%8B%E4%B8%8D%E7%BB%8F%E8%BF%87%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">2.9.</span> <span class="toc-text">直接交付-全程不经过路由器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%B4%E6%8E%A5%E4%BA%A4%E4%BB%98-%E5%A4%9A%E6%AC%A1%E7%9B%B4%E6%8E%A5%E4%BA%A4%E4%BB%98"><span class="toc-number">2.10.</span> <span class="toc-text">间接交付-多次直接交付</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3"><span class="toc-number">3.1.</span> <span class="toc-text">端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q%EF%BC%9AUDP%E5%AE%8C%E5%85%A8%E4%B8%8D%E9%9D%A0%E8%B0%B1%E5%90%97%EF%BC%9F"><span class="toc-number">3.2.</span> <span class="toc-text">Q：UDP完全不靠谱吗？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q%EF%BC%9ATCP%E4%B8%80%E5%AE%9A%E6%AF%94UDP%E6%85%A2%EF%BC%9F"><span class="toc-number">3.3.</span> <span class="toc-text">Q：TCP一定比UDP慢？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">3.4.</span> <span class="toc-text">TCP 三次握手</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text">应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B%E7%A4%BA%E4%BE%8B%EF%BC%88%E4%BB%A5%E6%9F%A5%E8%AF%A2-1chendian2-github-io-%E4%B8%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">4.1.</span> <span class="toc-text">域名解析过程示例（以查询 1chendian2.github.io 为例）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FTP"><span class="toc-number">4.2.</span> <span class="toc-text">FTP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS%EF%BC%88%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F%EF%BC%89-%E7%9B%B8%E5%85%B3%E7%9A%84%E8%AE%B0%E5%BD%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.3.</span> <span class="toc-text">DNS（域名系统） 相关的记录类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">4.4.</span> <span class="toc-text">电子邮件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%87%E7%BB%B4%E7%BD%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">4.5.</span> <span class="toc-text">万维网的工作流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E9%93%BE%E6%8E%A5%EF%BC%8C%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">4.6.</span> <span class="toc-text">鼠标点击一个网页链接，会发生什么？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%9D%82%E8%B0%88"><span class="toc-number">5.</span> <span class="toc-text">网络杂谈</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%97%AF%E2%80%A6-%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E6%AD%A4%E9%A1%B5%E9%9D%A2"><span class="toc-number">5.1.</span> <span class="toc-text">嗯… 无法访问此页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A8%E5%8F%B7%E4%B8%8A%E7%BD%91"><span class="toc-number">5.2.</span> <span class="toc-text">拨号上网</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AC%E4%B9%A6%E6%A2%B3%E7%90%86"><span class="toc-number"></span> <span class="toc-text">本书梳理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number"></span> <span class="toc-text">计算机网络体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">计算机网络概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">1.1.</span> <span class="toc-text">计算机网络的组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E3%80%81%E6%8A%A5%E6%96%87%E3%80%81%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">电路、报文、分组交换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.</span> <span class="toc-text">计算机网络的分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.4.</span> <span class="toc-text">计算机网络的性能指标</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">计算机网络的分层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ISO-OSI%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">ISO&#x2F;OSI模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-IP%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.2.</span> <span class="toc-text">TCP&#x2F;IP模型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number"></span> <span class="toc-text">物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">通信基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A2%E7%89%B9%E7%8E%87%E3%80%81%E6%AF%94%E7%89%B9%E7%8E%87"><span class="toc-number">1.1.</span> <span class="toc-text">波特率、比特率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A5%88%E5%A5%8E%E6%96%AF%E7%89%B9%E3%80%81%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">奈奎斯特、香农定理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%BC%E5%BD%BB%E6%96%AF%E7%89%B9%E7%BC%96%E7%A0%81"><span class="toc-number">1.3.</span> <span class="toc-text">曼彻斯特编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#QAM%E6%8A%80%E6%9C%AF"><span class="toc-number">1.4.</span> <span class="toc-text">QAM技术</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8"><span class="toc-number">2.</span> <span class="toc-text">传输介质</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E7%BB%9E%E7%BA%BF%E3%80%81%E5%90%8C%E8%BD%B4%E7%94%B5%E7%BC%86%E3%80%81%E5%85%89%E7%BA%A4%E3%80%81%E6%97%A0%E7%BA%BF%E4%BB%8B%E8%B4%A8"><span class="toc-number">2.1.</span> <span class="toc-text">双绞线、同轴电缆、光纤、无线介质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">2.2.</span> <span class="toc-text">物理接口的特性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87"><span class="toc-number">3.</span> <span class="toc-text">设备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E7%BA%BF%E5%99%A8"><span class="toc-number">3.1.</span> <span class="toc-text">集线器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E7%BB%A7%E5%99%A8"><span class="toc-number">3.2.</span> <span class="toc-text">中继器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82-1"><span class="toc-number"></span> <span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7%EF%BC%9A%E7%BB%84%E5%B8%A7%E6%96%B9%E6%B3%95%EF%BC%884%E7%A7%8D%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">封装成帧：组帧方法（4种）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">2.</span> <span class="toc-text">透明传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6%EF%BC%88%E6%A3%80%E9%94%99-%E7%BA%A0%E9%94%99%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">差错控制（检错&#x2F;纠错）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%EF%BC%88%E4%BA%A4%E7%BB%87%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">流量控制与可靠传输（交织）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ARQ"><span class="toc-number">4.1.</span> <span class="toc-text">ARQ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%9E%E8%BF%9E%E7%BB%ADARQ-SW"><span class="toc-number">4.1.1.</span> <span class="toc-text">非连续ARQ(SW)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9E%E7%BB%ADARQ-GN-SR"><span class="toc-number">4.1.2.</span> <span class="toc-text">连续ARQ(GN\SR)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6-FDM-TDM-CDM-WDM-%E7%BA%AFLOHA-%E6%97%B6%E9%9A%99ALOHA-CSMA-CD-CSMA-CA-%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92"><span class="toc-number">5.</span> <span class="toc-text">介质访问控制(FDM\TDM\CDM\WDM\纯LOHA\时隙ALOHA\CSMA\\CD\CSMA\\CA\令牌传递)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91-IEEE802-3-IEEE802-11-VLAN"><span class="toc-number">6.</span> <span class="toc-text">局域网(IEEE802.3\IEEE802.11\VLAN)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E5%9F%9F%E7%BD%91-PPP"><span class="toc-number">7.</span> <span class="toc-text">广域网(PPP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87-%E7%BD%91%E6%A1%A5%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">8.</span> <span class="toc-text">设备(网桥、交换机)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82-1"><span class="toc-number"></span> <span class="toc-text">网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%8A%9F%E8%83%BD%E3%80%81SDN"><span class="toc-number">1.</span> <span class="toc-text">网络层提供的两种服务、路由器的功能、SDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPv4-NAT-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91-%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88-ARP-DCHP-ICMP"><span class="toc-number">2.</span> <span class="toc-text">IPv4\NAT\划分子网\路由聚合\ARP\DCHP\ICMP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPv6-v4-v6%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.</span> <span class="toc-text">IPv6\v4-v6转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%EF%BC%88%E5%8D%8F%E8%AE%AE%EF%BC%89%E3%80%81%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E7%AE%97%E6%B3%95%EF%BC%88%E5%8D%8F%E8%AE%AE%EF%BC%89%E3%80%81RIP-OSPF-BGP%EF%BC%88%E8%B7%AF%E5%BE%84%E5%90%91%E9%87%8F%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">距离向量路由算法（协议）、链路状态算法（协议）、RIP\OSPF\BGP（路径向量协议）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E5%A4%9A%E6%92%AD%E3%80%81IGMP"><span class="toc-number">5.</span> <span class="toc-text">IP多播、IGMP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8IP"><span class="toc-number">6.</span> <span class="toc-text">移动IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%B2%E7%AA%81%E5%9F%9F%E5%92%8C%E5%B9%BF%E6%92%AD%E5%9F%9F%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%BB%84%E6%88%90%E5%92%8C%E5%8A%9F%E8%83%BD"><span class="toc-number">7.</span> <span class="toc-text">冲突域和广播域、路由器的组成和功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82-1"><span class="toc-number"></span> <span class="toc-text">传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E4%B8%AA%E4%BD%9C%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">4个作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP-%E6%A0%BC%E5%BC%8F%E3%80%81%E6%A3%80%E9%AA%8C"><span class="toc-number">2.</span> <span class="toc-text">UDP(格式、检验)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-%E6%A0%BC%E5%BC%8F%E3%80%81%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86%E3%80%81%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E3%80%81%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E3%80%81%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">3.</span> <span class="toc-text">TCP(格式、连接管理、可靠传输、流量控制、拥塞控制)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82-1"><span class="toc-number"></span> <span class="toc-text">应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C-S-P2P"><span class="toc-number">1.</span> <span class="toc-text">C&#x2F;S \ P2P</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS-3%E4%B8%AA%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-number">2.</span> <span class="toc-text">DNS(3个组成部分)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FTP-%E4%B8%A4%E6%9D%A1%E8%B7%AF%E5%BE%84"><span class="toc-number">3.</span> <span class="toc-text">FTP(两条路径)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#E-MAIL-SMTP-POP3-MIME"><span class="toc-number">4.</span> <span class="toc-text">E-MAIL(SMTP\POP3\MIME)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WWW-HTTP"><span class="toc-number">5.</span> <span class="toc-text">WWW(HTTP)</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/06/02/%E5%91%BC%E5%92%8C%E6%B5%A9%E7%89%B9%E6%97%85%E8%A1%8C/" title="呼和浩特旅行"><img src="/img/%E4%BA%91-%E5%A4%A9%E7%A9%BA-%E5%B1%B1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="呼和浩特旅行"/></a><div class="content"><a class="title" href="/2025/06/02/%E5%91%BC%E5%92%8C%E6%B5%A9%E7%89%B9%E6%97%85%E8%A1%8C/" title="呼和浩特旅行">呼和浩特旅行</a><time datetime="2025-06-02T08:17:37.000Z" title="发表于 2025-06-02 16:17:37">2025-06-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/02/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88408%E8%80%83%E7%A0%94%EF%BC%89/" title="操作系统（408考研）"><img src="/img/%E4%BA%91-%E5%A4%A9%E7%A9%BA-%E5%B1%B1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统（408考研）"/></a><div class="content"><a class="title" href="/2025/06/02/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88408%E8%80%83%E7%A0%94%EF%BC%89/" title="操作系统（408考研）">操作系统（408考研）</a><time datetime="2025-06-02T02:01:54.000Z" title="发表于 2025-06-02 10:01:54">2025-06-02</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 陈淀</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欲买桂花同载酒，终不似，少年游<br> 本网站由腾讯云 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/"><img src="/img/2025_1_14/002.png" alt="图片去外星球了"></a> 提供域名服务 </div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://www.chenhongyang86.fun/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://www.chenhongyang86.fun/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="嘿，小子，怎么不输入内容" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>